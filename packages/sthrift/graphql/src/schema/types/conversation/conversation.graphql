type Message {
    id: ObjectID!
    twilioMessageSid: String!
    authorId: ObjectID!
    content: String!
    createdAt: DateTime!
}

type Conversation implements MongoBase {
	sharer: PersonalUser!
	reserver: PersonalUser!
	listing: ItemListing!
	twilioConversationId: String!
    messages: [Message!]!
	id: ObjectID!
	schemaVersion: String!
	createdAt: DateTime!
	updatedAt: DateTime!
}

extend type Query {
	conversationsByUser(userId: ObjectID!): [Conversation]
	conversation(conversationId: ObjectID!): Conversation
}

extend type Mutation {
	createConversation(
		input: ConversationCreateInput!
	): ConversationMutationResult!
}

input ConversationCreateInput {
	sharerId: ObjectID!
	reserverId: ObjectID!
	listingId: ObjectID!
}

type ConversationMutationResult implements MutationResult {
	status: MutationStatus!
	conversation: Conversation
}