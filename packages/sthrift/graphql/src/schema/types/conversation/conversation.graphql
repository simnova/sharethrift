type Conversation implements MongoBase {
	sharer: User!
	reserver: User!
	listing: ItemListing!
	messagingConversationId: String!
	messages: [Message!]!
	id: ObjectID!
	schemaVersion: String!
	createdAt: DateTime!
	updatedAt: DateTime!
}

type Message {
	id: ObjectID!
	messagingMessageId: String!
	authorId: ObjectID!
	content: String!
	createdAt: DateTime!
}

extend type Query {
	conversationsByUser(userId: ObjectID!): [Conversation]
	conversation(conversationId: ObjectID!): Conversation
}

extend type Mutation {
	createConversation(
		input: ConversationCreateInput!
	): ConversationMutationResult!
	sendMessage(input: SendMessageInput!): SendMessageMutationResult!
}

input ConversationCreateInput {
	sharerId: ObjectID!
	reserverId: ObjectID!
	listingId: ObjectID!
}

input SendMessageInput {
	conversationId: ObjectID!
	content: String!
	authorId: ObjectID!
}

type ConversationMutationResult implements MutationResult {
	status: MutationStatus!
	conversation: Conversation
}

type SendMessageMutationResult implements MutationResult {
	status: MutationStatus!
	message: Message
}
