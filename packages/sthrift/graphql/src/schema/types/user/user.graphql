union User = PersonalUser | AdminUser

type UserPage {
	items: [User!]!
	total: Int!
	page: Int!
	pageSize: Int!
}

extend type Query {
	# Unified query - returns current user regardless of type
	currentUser: User!

	# Entry-point query - returns current authenticated user, auto-creating PersonalUser if first login (AdminUsers must be pre-created)
	currentUserAndCreateIfNotExists: User!

	# Get any user by ID (PersonalUser or AdminUser)
	userById(id: ObjectID!): User

	# List all users (both PersonalUser and AdminUser) for admin dashboard
	allSystemUsers(
		page: Int!
		pageSize: Int!
		searchText: String
		userTypeFilter: [String!] # ["personal", "admin"]
		statusFilters: [String!]
		sorter: SorterInput
	): UserPage!
}
