"use strict";(globalThis.webpackChunk_sthrift_docs=globalThis.webpackChunk_sthrift_docs||[]).push([[2442],{1184:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>a});var t=n(4041);const s={},o=t.createContext(s);function r(e){const i=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:i},e.children)}},1972:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"decisions/azure-infrastructure-deployments","title":"Select a Deployment Approach: AVM vs Bicep","description":"Decision record for selecting deployment approach: AVM vs Bicep.","source":"@site/docs/decisions/0014-azure-infrastructure-deployments.md","sourceDirName":"decisions","slug":"/decisions/azure-infrastructure-deployments","permalink":"/docs/decisions/azure-infrastructure-deployments","draft":false,"unlisted":false,"editUrl":"https://github.com/simnova/sharethrift/tree/main/packages/docs/docs/decisions/0014-azure-infrastructure-deployments.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14,"sidebar_label":"0014 Azure Infrastructure Deployments","description":"Decision record for selecting deployment approach: AVM vs Bicep.","status":"proposed","contact":"gidich etang93 mgupta83","date":"2025-08-01T00:00:00.000Z","deciders":"gidich etang93 mgupta83 nnoce14 iwilson dheruwala","consulted":null,"informed":null},"sidebar":"docsSidebar","previous":{"title":"0013 Test Suite Selection","permalink":"/docs/decisions/test-suite"},"next":{"title":"0015 SonarCloud Node16 EOL","permalink":"/docs/decisions/sonarcloud"}}');var s=n(1085),o=n(1184);const r={sidebar_position:14,sidebar_label:"0014 Azure Infrastructure Deployments",description:"Decision record for selecting deployment approach: AVM vs Bicep.",status:"proposed",contact:"gidich etang93 mgupta83",date:new Date("2025-08-01T00:00:00.000Z"),deciders:"gidich etang93 mgupta83 nnoce14 iwilson dheruwala",consulted:null,informed:null},a="Select a Deployment Approach: AVM vs Bicep",l={},d=[{value:"Context and Problem Statement",id:"context-and-problem-statement",level:2},{value:"Decision Drivers",id:"decision-drivers",level:2},{value:"Considered Options",id:"considered-options",level:2},{value:"Decision Outcome",id:"decision-outcome",level:2},{value:"Consequences",id:"consequences",level:3},{value:"Validation",id:"validation",level:2},{value:"Pros and Cons of the Options",id:"pros-and-cons-of-the-options",level:2},{value:"Azure Verified Modules (AVM)",id:"azure-verified-modules-avm",level:3},{value:"Bicep Templates",id:"bicep-templates",level:3},{value:"Hybrid of Both",id:"hybrid-of-both",level:3},{value:"More Information",id:"more-information",level:2}];function c(e){const i={a:"a",blockquote:"blockquote",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"select-a-deployment-approach-avm-vs-bicep",children:"Select a Deployment Approach: AVM vs Bicep"})}),"\n",(0,s.jsx)(i.h2,{id:"context-and-problem-statement",children:"Context and Problem Statement"}),"\n",(0,s.jsx)(i.p,{children:"The project requires a reliable and maintainable deployment approach for Azure infrastructure. The chosen solution must balance ease of use, maintainability, and flexibility while supporting the project's long-term scalability. The decision revolves around whether to use Azure Verified Modules (AVM) or Bicep templates for infrastructure deployments. AVM modules are maintained by Microsoft, reducing the need for manual updates, while Bicep templates provide greater flexibility but require more manual maintenance over time."}),"\n",(0,s.jsx)(i.h2,{id:"decision-drivers",children:"Decision Drivers"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Ease of use and maintainability"}),"\n",(0,s.jsx)(i.li,{children:"Long-term scalability and reduced manual updates"}),"\n",(0,s.jsx)(i.li,{children:"Flexibility for custom infrastructure requirements"}),"\n",(0,s.jsx)(i.li,{children:"Alignment with Azure best practices"}),"\n",(0,s.jsx)(i.li,{children:"Community support and documentation"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"considered-options",children:"Considered Options"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Azure Verified Modules (AVM)"}),": Pre-built modules maintained by Microsoft, offering ease of use and reduced maintenance."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Bicep Templates"}),": Lightweight, declarative infrastructure-as-code language for Azure, providing flexibility but requiring manual updates."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Hybrid of Both"}),": Frontend Deployments will use Bicep as enabling static websites are not a capability of Bicep directly, we need the flexibility to call upon powershell which AVM will not allow. We will also need the frontdoor cdn profile to be shared across the organization which currently isn't an option with AVM.\nBackend Deployments will use a mixture of Bicep and AVM.\nCosmosDB: There is a bug with the cosmos AVM where the ternary options are not being respected causing parameters we are setting to be ignored. All other resources and modules can use AVM for the backend Deployments."]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"decision-outcome",children:"Decision Outcome"}),"\n",(0,s.jsxs)(i.p,{children:["Chosen option: ",(0,s.jsx)(i.strong,{children:"TBD"})]}),"\n",(0,s.jsx)(i.p,{children:"No decision has been made yet. The team will conduct a focused evaluation by implementing deployments for selected infrastructure components using both AVM and Bicep. This approach ensures a fair comparison and avoids redundant effort. The final decision will be based on the criteria above and the results of this evaluation."}),"\n",(0,s.jsx)(i.h3,{id:"consequences",children:"Consequences"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Good: The selected approach will streamline infrastructure deployments, improve maintainability, and align with Azure best practices."}),"\n",(0,s.jsx)(i.li,{children:"Good: Using AVM reduces manual updates, freeing up developer time for other tasks."}),"\n",(0,s.jsx)(i.li,{children:"Bad: Bicep may require more manual updates, increasing maintenance overhead."}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"validation",children:"Validation"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Comparison of deployment complexity and maintainability for selected infrastructure components"}),"\n",(0,s.jsx)(i.li,{children:"Evaluation of long-term scalability and update requirements"}),"\n",(0,s.jsx)(i.li,{children:"Alignment with Azure best practices and CI/CD workflows"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"pros-and-cons-of-the-options",children:"Pros and Cons of the Options"}),"\n",(0,s.jsx)(i.h3,{id:"azure-verified-modules-avm",children:"Azure Verified Modules (AVM)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Good, because modules are maintained by Microsoft, reducing manual updates."}),"\n",(0,s.jsx)(i.li,{children:"Good, because it simplifies deployment workflows and aligns with Azure best practices."}),"\n",(0,s.jsx)(i.li,{children:"Neutral, because it may have limited flexibility for custom infrastructure requirements."}),"\n",(0,s.jsx)(i.li,{children:"Bad, because it may not cover all use cases, requiring fallback to custom solutions."}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"bicep-templates",children:"Bicep Templates"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Good, because it provides flexibility for custom infrastructure requirements."}),"\n",(0,s.jsx)(i.li,{children:"Good, because it is lightweight and integrates seamlessly with Azure."}),"\n",(0,s.jsx)(i.li,{children:"Neutral, because it requires manual updates over time, increasing maintenance overhead."}),"\n",(0,s.jsx)(i.li,{children:"Bad, because it may require more effort to align with Azure best practices."}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"hybrid-of-both",children:"Hybrid of Both"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Good, because it provides flexibility where needed"}),"\n",(0,s.jsx)(i.li,{children:"Bad, because decision makers need to remember to update with every module not listed."}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"more-information",children:"More Information"}),"\n",(0,s.jsx)(i.p,{children:"The team will select one or more infrastructure components to implement deployments using both AVM and Bicep. This focused approach ensures a fair comparison and avoids redundant effort. The evaluation will consider ease of use, maintainability, scalability, and alignment with Azure best practices. The final decision will be documented in this ADR after the evaluation is complete."}),"\n",(0,s.jsxs)(i.blockquote,{children:["\n",(0,s.jsxs)(i.p,{children:["For ongoing reference, the team can track the relative adoption and popularity of these tools using ",(0,s.jsx)(i.a,{href:"https://learn.microsoft.com/en-us/azure/",children:"Azure documentation"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);