"use strict";(globalThis.webpackChunk_sthrift_docs=globalThis.webpackChunk_sthrift_docs||[]).push([[8237],{6248:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"decisions/sonarcloud-code-duplication-checks","title":"Bypassing SonarCloud Code Duplication Checks for Unit Tests","description":"Decision record for bypassing SonarCloud code duplication checks for unit tests.","source":"@site/docs/decisions/0016-sonarcloud-code-duplication-checks.md","sourceDirName":"decisions","slug":"/decisions/sonarcloud-code-duplication-checks","permalink":"/docs/decisions/sonarcloud-code-duplication-checks","draft":false,"unlisted":false,"editUrl":"https://github.com/simnova/sharethrift/tree/main/packages/docs/docs/decisions/0016-sonarcloud-code-duplication-checks.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16,"sidebar_label":"0016 SonarCloud Code Duplication Checks","description":"Decision record for bypassing SonarCloud code duplication checks for unit tests.","status":"proposed","contact":"nnoce14 etang93","date":"2025-08-01T00:00:00.000Z","deciders":"gidich etang93 mgupta83 nnoce14 iwilson dheruwala","consulted":null,"informed":null},"sidebar":"docsSidebar","previous":{"title":"ADR Template","permalink":"/docs/decisions/adr-template"},"next":{"title":"ADR Short Template","permalink":"/docs/decisions/adr-short-template"}}');var s=i(5270),t=i(7678);const c={sidebar_position:16,sidebar_label:"0016 SonarCloud Code Duplication Checks",description:"Decision record for bypassing SonarCloud code duplication checks for unit tests.",status:"proposed",contact:"nnoce14 etang93",date:new Date("2025-08-01T00:00:00.000Z"),deciders:"gidich etang93 mgupta83 nnoce14 iwilson dheruwala",consulted:null,informed:null},d="Bypassing SonarCloud Code Duplication Checks for Unit Tests",r={},a=[{value:"Context and Problem Statement",id:"context-and-problem-statement",level:2},{value:"Decision Drivers",id:"decision-drivers",level:2},{value:"Considered Options",id:"considered-options",level:2},{value:"Decision Outcome",id:"decision-outcome",level:2},{value:"Consequences",id:"consequences",level:3},{value:"Validation",id:"validation",level:2},{value:"Pros and Cons of the Options",id:"pros-and-cons-of-the-options",level:2},{value:"Bypass duplication checks for unit tests",id:"bypass-duplication-checks-for-unit-tests",level:3},{value:"Increase the duplication threshold",id:"increase-the-duplication-threshold",level:3},{value:"More Information",id:"more-information",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"bypassing-sonarcloud-code-duplication-checks-for-unit-tests",children:"Bypassing SonarCloud Code Duplication Checks for Unit Tests"})}),"\n",(0,s.jsx)(n.h2,{id:"context-and-problem-statement",children:"Context and Problem Statement"}),"\n",(0,s.jsx)(n.p,{children:"SonarCloud performs code duplication checks as part of its static analysis. While these checks are valuable for maintaining clean and maintainable code, they are less relevant for unit tests, where duplication is often intentional and unavoidable. Increasing the duplication threshold to accommodate unit tests would compromise the quality of non-test code. To address this, the team has decided to bypass duplication checks specifically for unit test files."}),"\n",(0,s.jsx)(n.h2,{id:"decision-drivers",children:"Decision Drivers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Avoid false positives in duplication checks for unit tests"}),"\n",(0,s.jsx)(n.li,{children:"Maintain a strict duplication threshold for non-test code"}),"\n",(0,s.jsx)(n.li,{children:"Improve developer productivity by reducing unnecessary warnings"}),"\n",(0,s.jsx)(n.li,{children:"Ensure code quality remains high for production code"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"considered-options",children:"Considered Options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bypass duplication checks for unit tests"}),": Exclude unit test files from duplication checks in SonarCloud."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Increase the duplication threshold"}),": Raise the threshold globally to accommodate unit tests."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"decision-outcome",children:"Decision Outcome"}),"\n",(0,s.jsxs)(n.p,{children:["Chosen option: ",(0,s.jsx)(n.strong,{children:"Bypass duplication checks for unit tests"})]}),"\n",(0,s.jsx)(n.p,{children:"The team has decided to exclude unit test files from duplication checks in SonarCloud. This ensures that duplication warnings are meaningful for production code while avoiding unnecessary noise for unit tests."}),"\n",(0,s.jsx)(n.h3,{id:"consequences",children:"Consequences"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Good: Reduces false positives in duplication checks, improving developer productivity."}),"\n",(0,s.jsx)(n.li,{children:"Good: Maintains strict duplication thresholds for non-test code, ensuring high code quality."}),"\n",(0,s.jsx)(n.li,{children:"Bad: Requires configuration changes in SonarCloud to exclude unit test files."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"validation",children:"Validation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify that duplication warnings are no longer triggered for unit test files."}),"\n",(0,s.jsx)(n.li,{children:"Ensure that duplication checks remain strict for non-test code."}),"\n",(0,s.jsx)(n.li,{children:"Monitor SonarCloud reports to confirm the effectiveness of the exclusion."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"pros-and-cons-of-the-options",children:"Pros and Cons of the Options"}),"\n",(0,s.jsx)(n.h3,{id:"bypass-duplication-checks-for-unit-tests",children:"Bypass duplication checks for unit tests"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Good, because it avoids false positives and unnecessary warnings for unit tests."}),"\n",(0,s.jsx)(n.li,{children:"Good, because it maintains strict duplication thresholds for production code."}),"\n",(0,s.jsx)(n.li,{children:"Neutral, because it requires configuration changes in SonarCloud."}),"\n",(0,s.jsx)(n.li,{children:"Bad, because it may require ongoing maintenance if test file patterns change."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"increase-the-duplication-threshold",children:"Increase the duplication threshold"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Good, because it avoids duplication warnings for unit tests without configuration changes."}),"\n",(0,s.jsx)(n.li,{children:"Neutral, because it applies globally, potentially reducing code quality for production code."}),"\n",(0,s.jsx)(n.li,{children:"Bad, because it compromises the strictness of duplication checks for non-test code."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"more-information",children:"More Information"}),"\n",(0,s.jsx)(n.p,{children:"The team will update the SonarCloud configuration to exclude unit test files from duplication checks. This will be done by specifying file patterns or directories in the exclusion settings. The decision may be revisited if the exclusion impacts other aspects of code analysis."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["For ongoing reference, see ",(0,s.jsx)(n.a,{href:"https://sonarcloud.io/documentation",children:"SonarCloud documentation"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},7678:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>d});var o=i(9430);const s={},t=o.createContext(s);function c(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);