<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-decisions/snyk-security-integration" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">snyk-security-integration | Sharethrift Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developers.sharethrift.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://developers.sharethrift.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://developers.sharethrift.com/docs/decisions/snyk-security-integration"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="snyk-security-integration | Sharethrift Docs"><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developers.sharethrift.com/docs/decisions/snyk-security-integration"><link data-rh="true" rel="alternate" href="https://developers.sharethrift.com/docs/decisions/snyk-security-integration" hreflang="en"><link data-rh="true" rel="alternate" href="https://developers.sharethrift.com/docs/decisions/snyk-security-integration" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Decisions","item":"https://developers.sharethrift.com/docs/category/decisions"},{"@type":"ListItem","position":2,"name":"snyk-security-integration","item":"https://developers.sharethrift.com/docs/decisions/snyk-security-integration"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Sharethrift Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Sharethrift Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.081213ac.css">
<script src="/assets/js/runtime~main.eaba0abf.js" defer="defer"></script>
<script src="/assets/js/main.cdbf1bd1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_YnJl" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Sharethrift Logo" class="themedComponent_jyE1 themedComponent--light_OUff"><img src="/img/logo.svg" alt="Sharethrift Logo" class="themedComponent_jyE1 themedComponent--dark_aDxZ"></div><b class="navbar__title text--truncate">Home</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Doc</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/simnova/sharethrift" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_z7OM"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_YFSN colorModeToggle__ti1"><button class="clean-btn toggleButton_R2F7 toggleButtonDisabled_Mxo2" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_MtKO lightToggleIcon_r026"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_MtKO darkToggleIcon_ikf3"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_MtKO systemToggleIcon_N3nO"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_vbMF"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_UNGN"><div class="docsWrapper_m18Q"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_pFY2" type="button"></button><div class="docRoot_oo5D"><aside class="theme-doc-sidebar-container docSidebarContainer_leLC"><div class="sidebarViewport_MSxz"><div class="sidebar_NAmV"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Dek_"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Introduction ðŸ‘‹" class="linkLabel_P7mk">Introduction ðŸ‘‹</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_PIrx menu__link menu__link--sublist" href="/docs/category/technical-overview"><span title="Technical Overview" class="categoryLinkLabel_xVlR">Technical Overview</span></a><button aria-label="Expand sidebar category &#x27;Technical Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_PIrx menu__link menu__link--sublist menu__link--active" href="/docs/category/decisions"><span title="Decisions" class="categoryLinkLabel_xVlR">Decisions</span></a><button aria-label="Collapse sidebar category &#x27;Decisions&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/madr-architecture-decisions"><span title="0001 MADR Architecture Decisions" class="linkLabel_P7mk">0001 MADR Architecture Decisions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/open-telemetry"><span title="0002 Open Telemetry" class="linkLabel_P7mk">0002 Open Telemetry</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/domain-driven-design"><span title="0003 Domain Driven Design" class="linkLabel_P7mk">0003 Domain Driven Design</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/identity-access"><span title="0004 Identity and Access Control" class="linkLabel_P7mk">0004 Identity and Access Control</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/authorization"><span title="0005 Authorization and Access Pattern" class="linkLabel_P7mk">0005 Authorization and Access Pattern</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/maps"><span title="0006 Azure Maps Integration Decision" class="linkLabel_P7mk">0006 Azure Maps Integration Decision</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/serenityjs"><span title="0007 SerenityJS" class="linkLabel_P7mk">0007 SerenityJS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/cache-purging"><span title="0009 Cache Purging" class="linkLabel_P7mk">0009 Cache Purging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/react-router-loaders"><span title="0010 React Router Loadeer" class="linkLabel_P7mk">0010 React Router Loadeer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/bicep"><span title="0011 Bicep" class="linkLabel_P7mk">0011 Bicep</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/linter"><span title="0012 Linter Oxlint vs Biome" class="linkLabel_P7mk">0012 Linter Oxlint vs Biome</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/test-suite"><span title="0013 Test Suite Selection" class="linkLabel_P7mk">0013 Test Suite Selection</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/azure-infrastructure-deployments"><span title="0014 Azure Infrastructure Deployments" class="linkLabel_P7mk">0014 Azure Infrastructure Deployments</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/sonarcloud"><span title="0015 SonarCloud Node16 EOL" class="linkLabel_P7mk">0015 SonarCloud Node16 EOL</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/adr-template"><span title="ADR Template" class="linkLabel_P7mk">ADR Template</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/sonarcloud-code-duplication-checks"><span title="0016 SonarCloud Code Duplication Checks" class="linkLabel_P7mk">0016 SonarCloud Code Duplication Checks</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/adr-short-template"><span title="ADR Short Template" class="linkLabel_P7mk">ADR Short Template</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/chrome-content-overrides"><span title="0017 Chrome Content Overrides" class="linkLabel_P7mk">0017 Chrome Content Overrides</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/docusaurus-azure-pipeline-stages"><span title="0018 Docusaurus Azure Pipeline Stages" class="linkLabel_P7mk">0018 Docusaurus Azure Pipeline Stages</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/existing-azure-upload"><span title="0022 Existing Azure Upload" class="linkLabel_P7mk">0022 Existing Azure Upload</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/decisions/snyk-security-integration"><span title="snyk-security-integration" class="linkLabel_P7mk">snyk-security-integration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decisions/madr-agent-skills"><span title="0024 Agent Skills Integration" class="linkLabel_P7mk">0024 Agent Skills Integration</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_PIrx menu__link menu__link--sublist" href="/docs/category/security-overview"><span title="Security Overview" class="categoryLinkLabel_xVlR">Security Overview</span></a><button aria-label="Expand sidebar category &#x27;Security Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_PIrx menu__link menu__link--sublist" href="/docs/category/security-requirements"><span title="Security Requirements" class="categoryLinkLabel_xVlR">Security Requirements</span></a><button aria-label="Expand sidebar category &#x27;Security Requirements&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_PIrx menu__link menu__link--sublist" href="/docs/category/threat-assessments"><span title="Threat Assessments" class="categoryLinkLabel_xVlR">Threat Assessments</span></a><button aria-label="Expand sidebar category &#x27;Threat Assessments&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_ZAAI"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_kgUi"><div class="docItemContainer_rSGg"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_EQ2J" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_CfSP"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/decisions"><span>Decisions</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">snyk-security-integration</span></li></ul></nav><div class="tocCollapsible_KgiJ theme-doc-toc-mobile tocMobile_I2QL"><button type="button" class="clean-btn tocCollapsibleButton_HE7g">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>snyk-security-integration</h1></header><hr>
<h2 class="anchor anchorTargetStickyNavbar_Yx5z" id="sidebar_position-23sidebar_label-0023-snyk-security-integrationdescription-decision-record-for-integrating-snyk-for-security-scanning-in-development-and-cicdstatus-acceptedcontact-nnoce14date-2025-11-06deciders-gidich-etang93-mgupta83-nnoce14-iwilson-dheruwalaconsulted-gidichinformed">sidebar_position: 23
sidebar_label: 0023 Snyk Security Integration
description: &quot;Decision record for integrating Snyk for security scanning in development and CI/CD.&quot;
status: accepted
contact: nnoce14
date: 2025-11-06
deciders: gidich etang93 mgupta83 nnoce14 iwilson dheruwala
consulted: gidich
informed:<a href="#sidebar_position-23sidebar_label-0023-snyk-security-integrationdescription-decision-record-for-integrating-snyk-for-security-scanning-in-development-and-cicdstatus-acceptedcontact-nnoce14date-2025-11-06deciders-gidich-etang93-mgupta83-nnoce14-iwilson-dheruwalaconsulted-gidichinformed" class="hash-link" aria-label="Direct link to sidebar_position: 23
sidebar_label: 0023 Snyk Security Integration
description: &quot;Decision record for integrating Snyk for security scanning in development and CI/CD.&quot;
status: accepted
contact: nnoce14
date: 2025-11-06
deciders: gidich etang93 mgupta83 nnoce14 iwilson dheruwala
consulted: gidich
informed:" title="Direct link to sidebar_position: 23
sidebar_label: 0023 Snyk Security Integration
description: &quot;Decision record for integrating Snyk for security scanning in development and CI/CD.&quot;
status: accepted
contact: nnoce14
date: 2025-11-06
deciders: gidich etang93 mgupta83 nnoce14 iwilson dheruwala
consulted: gidich
informed:" translate="no">â€‹</a></h2>
<h1>Integrate Snyk for Security Scanning at Inception</h1>
<h2 class="anchor anchorTargetStickyNavbar_Yx5z" id="context-and-problem-statement">Context and Problem Statement<a href="#context-and-problem-statement" class="hash-link" aria-label="Direct link to Context and Problem Statement" title="Direct link to Context and Problem Statement" translate="no">â€‹</a></h2>
<p>Security vulnerabilities in dependencies and source code pose significant risks to production applications. Traditional security scanning approaches often identify vulnerabilities too late in the development lifecycle, making remediation more costly and time-consuming.</p>
<p>The ShareThrift project already uses SonarCloud for <strong>quality gates on PRs</strong>, which enforces:</p>
<ul>
<li class="">Code coverage thresholds for tests</li>
<li class="">Detection of code smells and technical debt</li>
<li class="">General code quality metrics</li>
<li class="">Some security hotspot detection and basic security analysis</li>
</ul>
<p>However, SonarCloud is primarily a <strong>code quality platform</strong>, and while it performs some security analysis, it lacks the robustness and specialization needed for comprehensive security scanning. The team needs a dedicated <strong>security-focused tool</strong> that specializes in:</p>
<ul>
<li class=""><strong>Dependency vulnerability scanning (SCA)</strong>: Detecting CVEs in npm packages and transitive dependencies</li>
<li class=""><strong>Security-focused SAST</strong>: Identifying security vulnerabilities in source code (injection attacks, authentication issues, etc.)</li>
<li class=""><strong>Infrastructure-as-code security</strong>: Scanning Bicep templates for Azure security misconfigurations and compliance issues</li>
</ul>
<p>The goal is to establish <strong>dual quality gates</strong>:</p>
<ol>
<li class=""><strong>SonarCloud Quality Gate</strong>: Code quality, test coverage, code smells</li>
<li class=""><strong>Snyk Security Gate</strong>: Dependency vulnerabilities, security issues in code, IaC misconfigurations</li>
</ol>
<p>The ShareThrift project requires a security solution that enables:</p>
<ol>
<li class=""><strong>Local development security scanning</strong>: Developers and AI agents can run Snyk CLI locally to catch security issues before committing code</li>
<li class=""><strong>CI/CD security gating</strong>: The same Snyk CLI commands run in CI pipelines to block PRs that introduce security vulnerabilities</li>
<li class=""><strong>Consistent security workflow</strong>: Identical scanning logic locally and in CI/CD ensures no surprises</li>
<li class=""><strong>Comprehensive security coverage</strong>: SCA for dependencies, SAST for source code, IaC for infrastructure configurations</li>
<li class=""><strong>&quot;Security at inception&quot;</strong>: Catch vulnerabilities during code generation by AI agents and in local development, not just in CI/CD</li>
<li class=""><strong>Continuous monitoring</strong>: Maintain a Snyk project in the Snyk Web UI that tracks vulnerabilities and security status over time, updated automatically by main branch builds</li>
</ol>
<p>The challenge is to implement this security-focused workflow that complements (not duplicates) the existing SonarCloud quality gates.</p>
<h2 class="anchor anchorTargetStickyNavbar_Yx5z" id="decision-drivers">Decision Drivers<a href="#decision-drivers" class="hash-link" aria-label="Direct link to Decision Drivers" title="Direct link to Decision Drivers" translate="no">â€‹</a></h2>
<ul>
<li class=""><strong>Dual quality gates</strong>: Establish separate gates for code quality (SonarCloud) and security (Snyk)</li>
<li class=""><strong>Security specialization</strong>: Need a tool focused specifically on security vulnerabilities, not general code quality</li>
<li class=""><strong>Dependency vulnerability scanning</strong>: Detect CVEs in npm packages and transitive dependencies (SCA)</li>
<li class=""><strong>Security-focused SAST</strong>: Identify security-specific issues (injection, auth, crypto) in source code</li>
<li class=""><strong>Infrastructure-as-code security</strong>: Scan Bicep templates for Azure security misconfigurations</li>
<li class=""><strong>Local + CI/CD consistency</strong>: Same CLI commands work identically for developers locally and in CI pipelines</li>
<li class=""><strong>Shift-left security</strong>: Catch vulnerabilities during local development and AI code generation</li>
<li class=""><strong>CI/CD security gate</strong>: Block PRs that introduce new security vulnerabilities</li>
<li class=""><strong>Developer and AI agent friendly</strong>: Easy to run locally before committing code</li>
<li class=""><strong>Monorepo support</strong>: Handle multi-package workspace structure effectively</li>
<li class=""><strong>Actionable security guidance</strong>: Provide clear remediation steps for security issues</li>
<li class=""><strong>Policy management</strong>: Support ignore policies for accepted security risks with expiration dates</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Yx5z" id="considered-options">Considered Options<a href="#considered-options" class="hash-link" aria-label="Direct link to Considered Options" title="Direct link to Considered Options" translate="no">â€‹</a></h2>
<ul>
<li class=""><strong>Snyk</strong>: Developer-first security platform with CLI, IDE extensions, and comprehensive scanning (SCA, SAST, IaC)</li>
<li class=""><strong>Expand SonarCloud usage</strong>: Rely solely on SonarCloud&#x27;s security features (not recommended for reasons detailed below)</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Yx5z" id="decision-outcome">Decision Outcome<a href="#decision-outcome" class="hash-link" aria-label="Direct link to Decision Outcome" title="Direct link to Decision Outcome" translate="no">â€‹</a></h2>
<p>Chosen option: <strong>Snyk</strong> with integrated CLI-based scanning in local development and CI/CD.</p>
<p>Snyk provides the specialized security focus needed to complement SonarCloud&#x27;s quality gates. The CLI-based approach ensures <strong>identical security scanning</strong> whether a developer runs it locally, an AI agent runs it during code generation, or the CI pipeline runs it on a PR - eliminating surprises and establishing a true security gate.</p>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="dual-quality-gate-strategy">Dual Quality Gate Strategy<a href="#dual-quality-gate-strategy" class="hash-link" aria-label="Direct link to Dual Quality Gate Strategy" title="Direct link to Dual Quality Gate Strategy" translate="no">â€‹</a></h3>
<p><strong>SonarCloud Quality Gate</strong> (existing):</p>
<ul>
<li class="">Code coverage enforcement</li>
<li class="">Code smells and technical debt tracking</li>
<li class="">Maintainability and reliability metrics</li>
<li class="">General code quality standards</li>
<li class="">Basic security analysis (security hotspots, some vulnerability detection)</li>
</ul>
<p><strong>Snyk Security Gate</strong> (new):</p>
<ul>
<li class="">Dependency vulnerability detection (SCA)</li>
<li class="">Security-specific code vulnerabilities (SAST)</li>
<li class="">Infrastructure-as-code security misconfigurations (IaC)</li>
<li class="">Blocks PRs with high/critical security issues</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="implementation-strategy">Implementation Strategy<a href="#implementation-strategy" class="hash-link" aria-label="Direct link to Implementation Strategy" title="Direct link to Implementation Strategy" translate="no">â€‹</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Yx5z" id="1-local-development-integration">1. <strong>Local Development Integration</strong><a href="#1-local-development-integration" class="hash-link" aria-label="Direct link to 1-local-development-integration" title="Direct link to 1-local-development-integration" translate="no">â€‹</a></h4>
<p><strong>Installation and Authentication</strong>:</p>
<div class="language-bash codeBlockContainer_pcba theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_i37J"><pre tabindex="0" class="prism-code language-bash codeBlock_vlrX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_oa44"><span class="token-line" style="color:#393A34"><span class="token plain"># Install Snyk CLI (global or dev dependency)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install -g snyk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or in package.json devDependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pnpm add -D snyk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Authenticate (one-time per machine)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">snyk auth &lt;TOKEN&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or set environment variable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export SNYK_TOKEN=&quot;&lt;TOKEN&gt;&quot;</span><br></span></code></pre></div></div>
<p><strong>NPM Scripts for Developer Ergonomics</strong> (<code>package.json</code>):</p>
<div class="language-json codeBlockContainer_pcba theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_i37J"><pre tabindex="0" class="prism-code language-json codeBlock_vlrX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_oa44"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;scripts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;snyk&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pnpm run snyk:test &amp;&amp; pnpm run snyk:code&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;snyk:report&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;pnpm run snyk:monitor &amp;&amp; pnpm run snyk:code:report&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;snyk:test&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;snyk test --all-projects --org=simnova --remote-repo-url=https://github.com/simnova/sharethrift --policy-path=.snyk --exclude=dist,build,.turbo,coverage&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;snyk:monitor&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;snyk monitor --all-projects --org=simnova --target-reference=main --remote-repo-url=https://github.com/simnova/sharethrift --project-name-prefix=\&quot;sharethrift/\&quot; --policy-path=.snyk --exclude=dist,build,.turbo,coverage&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;snyk:code&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;snyk code test --org=simnova --remote-repo-url=https://github.com/simnova/sharethrift --severity-threshold=medium&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;snyk:code:report&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;snyk code test --org=simnova --remote-repo-url=https://github.com/simnova/sharethrift --target-reference=main --project-name=sharethrift-code --report&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;snyk:iac&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;snyk iac test iac/**/*.bicep apps/**/iac/**/*.bicep --org=simnova --remote-repo-url=https://github.com/simnova/sharethrift&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;snyk:iac:report&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;snyk iac test iac/**/*.bicep apps/**/iac/**/*.bicep --org=simnova --remote-repo-url=https://github.com/simnova/sharethrift --target-reference=main --target-name=sharethrift-iac --report&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Yx5z" id="3-cicd-integration">3. <strong>CI/CD Integration</strong><a href="#3-cicd-integration" class="hash-link" aria-label="Direct link to 3-cicd-integration" title="Direct link to 3-cicd-integration" translate="no">â€‹</a></h4>
<p><strong>Azure Pipelines Implementation</strong>:</p>
<p>The Snyk CLI is integrated into the build stage with different behaviors for PR vs. main branch builds, establishing the <strong>Snyk Security Gate</strong> that works alongside the existing SonarCloud quality gate:</p>
<div class="language-yaml codeBlockContainer_pcba theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_i37J"><pre tabindex="0" class="prism-code language-yaml codeBlock_vlrX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_oa44"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Audit security vulnerabilities with Snyk CLI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">task</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Bash@3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">displayName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Audit security vulnerabilities with Snyk CLI&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">inputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">targetType</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;inline&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">script</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      set -euo pipefail</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Verify environment variables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">z &quot;$SNYK_TOKEN&quot; </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">echo &quot;Error</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SNYK_TOKEN is empty or not loaded.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Authenticate Snyk CLI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo &quot;Authenticating Snyk CLI</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pnpm exec snyk auth &quot;$SNYK_TOKEN&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      echo &quot;Running Snyk to detect security vulnerabilities</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># If PR build, run test commands (SECURITY GATE - will fail PR on high/critical issues)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      if </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> &quot;$(Build.Reason)&quot; = &quot;PullRequest&quot; </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo &quot;Running Snyk for PR build</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pnpm run snyk</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">code      </span><span class="token comment" style="color:#999988;font-style:italic"># SAST - fail on security vulnerabilities in code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pnpm run snyk</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">test      </span><span class="token comment" style="color:#999988;font-style:italic"># SCA - fail on vulnerable dependencies</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Main branch: report to Snyk dashboard and monitor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        echo &quot;Running Snyk for main branch build</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pnpm run snyk</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">code</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">report</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pnpm run snyk</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">monitor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">workingDirectory</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">SNYK_TOKEN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $(SNYK_TOKEN)</span><br></span></code></pre></div></div>
<p><strong>PR Builds (Security Gate)</strong>:</p>
<ul>
<li class="">Run <code>snyk:code</code> (SAST) to detect security vulnerabilities in source code</li>
<li class="">Run <code>snyk:test</code> (SCA) to check for vulnerable dependencies</li>
<li class=""><strong>FAIL THE BUILD</strong> if high/critical vulnerabilities are found - <strong>this is the security gate</strong></li>
<li class="">Provide immediate feedback in PR checks</li>
<li class="">Works alongside SonarCloud quality gate (both must pass for PR to merge)</li>
</ul>
<p><strong>Main Branch Builds (Monitoring)</strong>:</p>
<ul>
<li class="">Run <code>snyk:code:report</code> to report SAST results to Snyk Web UI dashboard</li>
<li class="">Run <code>snyk:monitor</code> to update the Snyk project with current dependency snapshot</li>
<li class=""><strong>Updates Snyk Web UI project</strong>: After each merge to main, these commands update the ShareThrift project in Snyk Web UI with the current vulnerability snapshot</li>
<li class="">Track security trends, newly disclosed vulnerabilities, and remediation progress over time in Snyk UI</li>
<li class="">Enables proactive security monitoring even for vulnerabilities disclosed after code was merged</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Yx5z" id="4-policy-management">4. <strong>Policy Management</strong><a href="#4-policy-management" class="hash-link" aria-label="Direct link to 4-policy-management" title="Direct link to 4-policy-management" translate="no">â€‹</a></h4>
<p><strong>Ignore Policy</strong> (<code>.snyk</code> file):</p>
<div class="language-yaml codeBlockContainer_pcba theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_i37J"><pre tabindex="0" class="prism-code language-yaml codeBlock_vlrX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_oa44"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1.5.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">ignore</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">&#x27;SNYK-JS-SIRV-12558119&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">&#x27;* &gt; sirv@2.0.4&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">reason</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Transitive dependency in Docusaurus; not exploitable in static site serving context (dev-only asset handler)&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">expires</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2026-11-20T00:00:00.000Z&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">created</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;2024-11-06T15:57:00.000Z&#x27;</span><br></span></code></pre></div></div>
<p>The <code>.snyk</code> policy file allows teams to:</p>
<ul>
<li class="">Document known false positives or accepted risks when no remediation is available</li>
<li class="">Set expiration dates for ignore rules (forcing periodic review)</li>
<li class="">Provide business justification for accepting risks</li>
<li class="">Share policies across local development and CI/CD</li>
</ul>
<p><strong>Governance</strong>: The <code>.snyk</code> file is specified in <code>CODEOWNERS</code>, requiring senior developer approval for any changes. This ensures proper risk assessment and prevents casual ignoring of security vulnerabilities.</p>
<h4 class="anchor anchorTargetStickyNavbar_Yx5z" id="5-scan-coverage">5. <strong>Scan Coverage</strong><a href="#5-scan-coverage" class="hash-link" aria-label="Direct link to 5-scan-coverage" title="Direct link to 5-scan-coverage" translate="no">â€‹</a></h4>
<p><strong>SCA (Software Composition Analysis)</strong>:</p>
<ul>
<li class="">Scans <code>package.json</code>, <code>package-lock.json</code>, <code>pnpm-lock.yaml</code> in all workspace packages</li>
<li class="">Detects known CVEs in direct and transitive dependencies</li>
<li class="">Provides upgrade paths and fix recommendations</li>
</ul>
<p><strong>SAST (Static Application Security Testing)</strong>:</p>
<ul>
<li class="">Analyzes TypeScript/JavaScript source code for security vulnerabilities</li>
<li class="">Detects issues like SQL injection, XSS, insecure crypto, authentication flaws</li>
<li class="">Provides actionable remediation guidance</li>
</ul>
<p><strong>IaC (Infrastructure as Code)</strong>:</p>
<ul>
<li class="">Scans Bicep templates (<code>*.bicep</code>) for Azure security misconfigurations</li>
<li class="">Checks for insecure resource configurations, missing encryption, overly permissive access</li>
<li class="">Validates against Azure security best practices</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Yx5z" id="6-ai-agent-integration">6. <strong>AI Agent Integration</strong><a href="#6-ai-agent-integration" class="hash-link" aria-label="Direct link to 6-ai-agent-integration" title="Direct link to 6-ai-agent-integration" translate="no">â€‹</a></h4>
<p><strong>GitHub Copilot Snyk Rules</strong> (<code>.github/instructions/snyk_rules.instructions.md</code>):</p>
<div class="language-markdown codeBlockContainer_pcba theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_i37J"><pre tabindex="0" class="prism-code language-markdown codeBlock_vlrX thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_oa44"><span class="token-line" style="color:#393A34"><span class="token title important punctuation" style="color:#393A34">#</span><span class="token title important"> Project security best practices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Always run snyk_code_scan tool for new first party code that is generated in a Snyk-supported language.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> If any security issues are found based on newly introduced or modified code or dependencies, attempt to fix the issues using the results context from Snyk.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Rescan the code after fixing the issues to ensure that the issues were fixed and that there are no newly introduced issues.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token list punctuation" style="color:#393A34">-</span><span class="token plain"> Repeat this process until no new issues are found.</span><br></span></code></pre></div></div>
<p>AI agents automatically run Snyk SAST scans on generated code, ensuring <strong>security at inception</strong> - catching vulnerabilities during code generation before they&#x27;re even committed.</p>
<h2 class="anchor anchorTargetStickyNavbar_Yx5z" id="consequences">Consequences<a href="#consequences" class="hash-link" aria-label="Direct link to Consequences" title="Direct link to Consequences" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="positive-consequences">Positive Consequences<a href="#positive-consequences" class="hash-link" aria-label="Direct link to Positive Consequences" title="Direct link to Positive Consequences" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>Clear separation of concerns</strong>: SonarCloud enforces code quality gates (coverage, code smells), Snyk enforces security gates (CVEs, vulnerabilities, IaC)</li>
<li class=""><strong>Specialized security focus</strong>: Snyk is purpose-built for security, not a general-purpose quality tool trying to do security</li>
<li class=""><strong>Comprehensive dependency scanning</strong>: Detects CVEs in npm packages and transitive dependencies - critical capability SonarCloud doesn&#x27;t provide</li>
<li class=""><strong>IaC security scanning</strong>: Thoroughly scans Bicep templates for Azure security misconfigurations</li>
<li class=""><strong>Local + CI consistency</strong>: Developers run the exact same <code>pnpm run snyk:*</code> commands locally that CI runs, eliminating surprises</li>
<li class=""><strong>Shift-left security</strong>: Security issues caught during code generation by AI agents and in local development before commit</li>
<li class=""><strong>True security gate</strong>: PR builds fail on high/critical vulnerabilities, preventing insecure code from merging</li>
<li class=""><strong>Developer-friendly</strong>: CLI integration and npm scripts provide familiar, easy-to-use workflows</li>
<li class=""><strong>Monorepo support</strong>: <code>--all-projects</code> flag handles workspace structure automatically</li>
<li class=""><strong>Policy management</strong>: <code>.snyk</code> file enables documented risk acceptance with expiration dates</li>
<li class=""><strong>Continuous monitoring via Snyk Web UI</strong>: Main branch builds automatically update the ShareThrift project in Snyk Web UI, tracking vulnerability trends and security health over time</li>
<li class=""><strong>Proactive alerting</strong>: Snyk Web UI monitors for newly disclosed CVEs affecting our dependencies, even after code is merged</li>
<li class=""><strong>Actionable security feedback</strong>: Provides clear remediation guidance, upgrade paths, and fix PRs specifically for security issues</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="neutral-consequences">Neutral Consequences<a href="#neutral-consequences" class="hash-link" aria-label="Direct link to Neutral Consequences" title="Direct link to Neutral Consequences" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>Dual tool workflow</strong>: Developers check SonarCloud for quality issues and Snyk for security issues - but this clear separation is actually beneficial</li>
<li class=""><strong>Learning curve</strong>: Developers need to learn Snyk CLI commands and policy syntax (minimal investment)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="negative-consequences">Negative Consequences<a href="#negative-consequences" class="hash-link" aria-label="Direct link to Negative Consequences" title="Direct link to Negative Consequences" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>Both gates must pass</strong>: PRs require passing both SonarCloud quality gate and Snyk security gate</li>
<li class=""><strong>False positives</strong>: Some vulnerabilities may not be exploitable in specific contexts, requiring policy management</li>
<li class=""><strong>Token management</strong>: Requires secure handling of <code>SNYK_TOKEN</code> in environment variables and CI/CD secrets</li>
<li class=""><strong>Cost</strong>: Snyk is free for open-source projects but requires paid plans for private repositories with advanced features</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Yx5z" id="validation">Validation<a href="#validation" class="hash-link" aria-label="Direct link to Validation" title="Direct link to Validation" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="local-development-validation">Local Development Validation<a href="#local-development-validation" class="hash-link" aria-label="Direct link to Local Development Validation" title="Direct link to Local Development Validation" translate="no">â€‹</a></h3>
<ul>
<li class="">Developers should run <code>pnpm run snyk</code> before committing changes to a PR (in addition to <code>pnpm run verify</code> for quality checks)</li>
<li class="">AI agents automatically run <code>snyk_code_scan</code> tool after generating code</li>
<li class="">Results are displayed in terminal with actionable remediation steps</li>
<li class=""><strong>Remediation expectations</strong>:<!-- -->
<ul>
<li class="">Prioritize by severity: Critical â†’ High â†’ Medium â†’ Low</li>
<li class="">All issues must be investigated and resolved if possible (including low severity)</li>
<li class="">If no remediation is available, document in <code>.snyk</code> file with justification and request CODEOWNERS approval</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="cicd-validation">CI/CD Validation<a href="#cicd-validation" class="hash-link" aria-label="Direct link to CI/CD Validation" title="Direct link to CI/CD Validation" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>PR security gate</strong>: PR builds fail if high/critical vulnerabilities are detected by Snyk</li>
<li class="">Snyk results are visible in Azure Pipelines build logs alongside SonarCloud quality gate results</li>
<li class=""><strong>Both gates must pass</strong>: Snyk security gate AND SonarCloud quality gate must pass before PR can merge</li>
<li class="">Developers can check build logs on Azure DevOps if gates fail (ideally won&#x27;t happen since developers can run commands locally first)</li>
<li class=""><strong>Main branch monitoring</strong>: Main branch builds update the ShareThrift project in Snyk Web UI with current security snapshot</li>
<li class=""><strong>Snyk Web UI project</strong>: Team can view security trends, vulnerability history, and remediation progress in Snyk dashboard</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Yx5z" id="pros-and-cons-of-the-options">Pros and Cons of the Options<a href="#pros-and-cons-of-the-options" class="hash-link" aria-label="Direct link to Pros and Cons of the Options" title="Direct link to Pros and Cons of the Options" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="snyk">Snyk<a href="#snyk" class="hash-link" aria-label="Direct link to Snyk" title="Direct link to Snyk" translate="no">â€‹</a></h3>
<ul>
<li class="">Good, because it provides comprehensive SCA, SAST, and IaC scanning in one platform</li>
<li class="">Good, because the CLI enables consistent workflows across development and CI/CD</li>
<li class="">Good, because it has excellent TypeScript/JavaScript and Azure support</li>
<li class="">Good, because it integrates with AI agent workflows for automatic security scanning</li>
<li class="">Good, because it provides security-specific remediation guidance and fix PRs</li>
<li class="">Neutral, because it requires managing an additional tool alongside SonarCloud</li>
<li class="">Bad, because it requires a paid plan for private repositories with advanced features</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="expand-sonarcloud-usage-rely-solely-on-existing-tool">Expand SonarCloud usage (rely solely on existing tool)<a href="#expand-sonarcloud-usage-rely-solely-on-existing-tool" class="hash-link" aria-label="Direct link to Expand SonarCloud usage (rely solely on existing tool)" title="Direct link to Expand SonarCloud usage (rely solely on existing tool)" translate="no">â€‹</a></h3>
<ul>
<li class="">Good, because it&#x27;s already integrated and familiar to the team</li>
<li class="">Good, because it provides some security hotspot detection and basic security analysis for source code</li>
<li class="">Good, because it provides quality gates for code coverage and code smells</li>
<li class="">Neutral, because it focuses primarily on code quality (coverage, smells, maintainability) rather than security vulnerabilities</li>
<li class="">Neutral, because its security analysis is less robust and specialized compared to dedicated security tools</li>
<li class="">Bad, because it has <strong>no meaningful SCA capabilities</strong> - doesn&#x27;t scan npm dependencies for CVEs</li>
<li class="">Bad, because it doesn&#x27;t detect vulnerable transitive dependencies in the dependency tree</li>
<li class="">Bad, because its SAST focuses on general code quality, not security-specific vulnerabilities (injection, auth, crypto)</li>
<li class="">Bad, because IaC security scanning is minimal compared to dedicated security tools</li>
<li class="">Bad, because it doesn&#x27;t provide security-specific remediation guidance for dependency vulnerabilities</li>
<li class="">Bad, because it doesn&#x27;t integrate with AI agent workflows for security scanning</li>
<li class=""><strong>Bad, because code quality and security are fundamentally different concerns that need specialized tools</strong></li>
<li class=""><strong>Bad, because using a quality gate tool as a security gate leaves critical security gaps (no dependency CVE detection)</strong></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Yx5z" id="more-information">More Information<a href="#more-information" class="hash-link" aria-label="Direct link to More Information" title="Direct link to More Information" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="documentation">Documentation<a href="#documentation" class="hash-link" aria-label="Direct link to Documentation" title="Direct link to Documentation" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>Getting Started Guide</strong>: See the <a class="" href="/docs/intro">Introduction</a> documentation for local Snyk authentication and usage</li>
<li class=""><strong>Snyk Instructions</strong>: <code>.github/instructions/snyk_rules.instructions.md</code> contains AI agent rules for automatic scanning</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References" translate="no">â€‹</a></h3>
<ul>
<li class=""><a href="https://docs.snyk.io/snyk-cli" target="_blank" rel="noopener noreferrer" class="">Snyk CLI Documentation</a></li>
<li class=""><a href="https://docs.snyk.io/integrations/ci-cd-integrations/azure-pipelines-integration" target="_blank" rel="noopener noreferrer" class="">Snyk for Azure Pipelines</a></li>
<li class=""><a href="https://docs.snyk.io/snyk-cli/test-for-vulnerabilities/the-.snyk-file" target="_blank" rel="noopener noreferrer" class="">Snyk Policy File Documentation</a></li>
<li class=""><a href="https://docs.snyk.io/scan-applications/supported-languages-and-frameworks/monorepos" target="_blank" rel="noopener noreferrer" class="">Snyk for Monorepos</a></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="future-considerations">Future Considerations<a href="#future-considerations" class="hash-link" aria-label="Direct link to Future Considerations" title="Direct link to Future Considerations" translate="no">â€‹</a></h3>
<ul>
<li class="">
<p><strong>Snyk IaC Pipeline Integration</strong>: Snyk IaC scanning will not be included in the build pipeline initially. The team needs to analyze all reported issues by Snyk and determine appropriate actions before enabling automated gating. This ensures that only actionable and relevant misconfigurations block builds, and avoids unnecessary disruption from false positives or non-critical findings.</p>
</li>
<li class="">
<p><strong>Snyk IaC CLI Invocation Issues</strong>: There are current issues with the <code>snyk iac test</code> command: when run via <code>pnpm exec snyk iac test &lt;dir&gt;</code>, it accepts a directory path and analyzes all files. However, when invoked from a package.json script, the CLI does not accept a directory path for some reason. This limitation needs to be resolved before Snyk IaC can be fully integrated into automated scripts and CI/CD pipelines.</p>
</li>
<li class="">
<p><strong>IDE Integration</strong>: Consider adding Snyk VS Code extension for inline security feedback</p>
</li>
<li class="">
<p><strong>GitHub App</strong>: Evaluate Snyk GitHub App for automatic PR checks and fix PRs</p>
</li>
<li class="">
<p><strong>Dependency Upgrade Automation</strong>: Use Snyk fix PRs to automate dependency upgrades</p>
</li>
<li class="">
<p><strong>Security Policy Evolution</strong>: Regularly review and update <code>.snyk</code> ignore rules as vulnerabilities are fixed upstream</p>
</li>
<li class="">
<p><strong>Enhanced Snyk Web UI Usage</strong>: Leverage Snyk Web UI features like:</p>
<ul>
<li class="">Security dashboards and executive reporting</li>
<li class="">Automated fix PRs for newly disclosed vulnerabilities</li>
<li class="">Integration alerts (email, Slack) for critical vulnerabilities</li>
<li class="">Historical trending and vulnerability/security health metrics</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Yx5z" id="related-adrs">Related ADRs<a href="#related-adrs" class="hash-link" aria-label="Direct link to Related ADRs" title="Direct link to Related ADRs" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>0015-sonarcloud.md</strong>: SonarCloud integration for code quality (complementary to Snyk for security)</li>
<li class=""><strong>0011-bicep.md</strong>: Bicep infrastructure-as-code (scanned by Snyk IaC)</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_bE00"><a href="https://github.com/simnova/sharethrift/tree/main/packages/docs/docs/decisions/0023-snyk-security-integration.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_K7ge" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_SpmY"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/decisions/existing-azure-upload"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">0022 Existing Azure Upload</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/decisions/madr-agent-skills"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">0024 Agent Skills Integration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_ecJo thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sidebar_position-23sidebar_label-0023-snyk-security-integrationdescription-decision-record-for-integrating-snyk-for-security-scanning-in-development-and-cicdstatus-acceptedcontact-nnoce14date-2025-11-06deciders-gidich-etang93-mgupta83-nnoce14-iwilson-dheruwalaconsulted-gidichinformed" class="table-of-contents__link toc-highlight">sidebar_position: 23
sidebar_label: 0023 Snyk Security Integration
description: &quot;Decision record for integrating Snyk for security scanning in development and CI/CD.&quot;
status: accepted
contact: nnoce14
date: 2025-11-06
deciders: gidich etang93 mgupta83 nnoce14 iwilson dheruwala
consulted: gidich
informed:</a></li><li><a href="#context-and-problem-statement" class="table-of-contents__link toc-highlight">Context and Problem Statement</a></li><li><a href="#decision-drivers" class="table-of-contents__link toc-highlight">Decision Drivers</a></li><li><a href="#considered-options" class="table-of-contents__link toc-highlight">Considered Options</a></li><li><a href="#decision-outcome" class="table-of-contents__link toc-highlight">Decision Outcome</a><ul><li><a href="#dual-quality-gate-strategy" class="table-of-contents__link toc-highlight">Dual Quality Gate Strategy</a></li><li><a href="#implementation-strategy" class="table-of-contents__link toc-highlight">Implementation Strategy</a></li></ul></li><li><a href="#consequences" class="table-of-contents__link toc-highlight">Consequences</a><ul><li><a href="#positive-consequences" class="table-of-contents__link toc-highlight">Positive Consequences</a></li><li><a href="#neutral-consequences" class="table-of-contents__link toc-highlight">Neutral Consequences</a></li><li><a href="#negative-consequences" class="table-of-contents__link toc-highlight">Negative Consequences</a></li></ul></li><li><a href="#validation" class="table-of-contents__link toc-highlight">Validation</a><ul><li><a href="#local-development-validation" class="table-of-contents__link toc-highlight">Local Development Validation</a></li><li><a href="#cicd-validation" class="table-of-contents__link toc-highlight">CI/CD Validation</a></li></ul></li><li><a href="#pros-and-cons-of-the-options" class="table-of-contents__link toc-highlight">Pros and Cons of the Options</a><ul><li><a href="#snyk" class="table-of-contents__link toc-highlight">Snyk</a></li><li><a href="#expand-sonarcloud-usage-rely-solely-on-existing-tool" class="table-of-contents__link toc-highlight">Expand SonarCloud usage (rely solely on existing tool)</a></li></ul></li><li><a href="#more-information" class="table-of-contents__link toc-highlight">More Information</a><ul><li><a href="#documentation" class="table-of-contents__link toc-highlight">Documentation</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li><li><a href="#future-considerations" class="table-of-contents__link toc-highlight">Future Considerations</a></li><li><a href="#related-adrs" class="table-of-contents__link toc-highlight">Related ADRs</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Doc</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/sharethrift" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_z7OM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/sharethrift" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_z7OM"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/sharethrift" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_z7OM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/simnova/sharethrift" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_z7OM"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2026 Simnova, Inc.</div></div></div></footer></div>
</body>
</html>