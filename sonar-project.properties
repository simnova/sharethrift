# SonarCloud configuration for CellixJS monorepo
# Sensitive values are loaded from environment variables

sonar.projectKey=simnova_sharethrift-data-access
sonar.organization=simnova
sonar.projectName=Sharethrift
sonar.projectVersion=1.0.0

# Source directories (exclude test files)
sonar.sources=apps,packages,build-pipeline/scripts
sonar.tests=apps,packages

# Test file patterns (only include actual test files)
sonar.test.inclusions=**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx,**/*.stories.tsx

# Exclusions (matching CI/CD pipeline)
sonar.exclusions=**/*.config.ts,**/tsconfig.json,**/.storybook/**,**/*.stories.ts,**/*.test.ts,**/*.test.tsx,**/generated.ts,**/generated.tsx,**/*.d.ts,dist/**,apps/docs/src/test/**,packages/sthrift/domain/tests/**,packages/cellix/mock-oauth2-server/**,packages/cellix/mock-mongodb-memory-server/**

# Coverage exclusions
# Standard exclusions: config, test, generated files
# Infrastructure exclusions: mongoose models, service config, graphql builders (matching cellix pattern)
# UI component exclusions: signup flow (WIP), settings pages
# Domain adapter exclusions: adapters bridge layers and are tested via integration tests
sonar.coverage.exclusions=**/*.config.ts,**/tsconfig.json,**/.storybook/**,**/*.stories.ts,**/*.stories.tsx,**/*.test.ts,**/*.test.tsx,**/generated.ts,**/generated.tsx,**/*.d.ts,dist/**,apps/docs/src/test/**,build-pipeline/scripts/**,packages/sthrift/domain/tests/**,packages/cellix/mock-oauth2-server/**,packages/cellix/mock-mongodb-memory-server/**,packages/sthrift/data-sources-mongoose-models/**,packages/sthrift/graphql/src/schema/builder/**,apps/api/src/service-config/**,packages/sthrift/persistence/src/datasources/**/*.repository.ts,packages/sthrift/persistence/src/datasources/**/index.ts,**/*.domain-adapter.ts,apps/ui-sharethrift/src/components/layouts/signup/**,apps/ui-sharethrift/src/components/layouts/home/account/settings/**,apps/ui-sharethrift/src/components/shared/auth-landing.tsx,apps/ui-sharethrift/src/components/layouts/home/components/create-listing/create-listing-form.tsx

# CPD (code duplication) exclusions
# Exclude test files and generated code
# Exclude domain value objects and adapters - architectural duplication between layers is by design
# Exclude seed data files - intentionally repetitive test data
sonar.cpd.exclusions=**/*.test.ts,**/generated.tsx,**/*-permissions.ts,**/*.domain-adapter.ts,**/*.helpers.ts,**/seed/**/*.ts,**/mock-*/src/**/*.ts

# Coverage report paths
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# Language settings
sonar.typescript.lcov.reportPaths=coverage/lcov.info
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# SCM integration
sonar.scm.provider=git